(function(a){a(document).ready(function(){var f={fontset:"",modules:[],branding:{}};var g=false;var l=/^[0-9a-zA-Z _:.\/\-\#\?\=\%]*$/;var e=false;var j={init:function(){a(".branding-bg-color").wpColorPicker(b);a("#semplice").on("click",".content-container a, .mc-content-container a, .mc-sub-content-container a",function(s){s.preventDefault()});var q=function(t){t=t||window.event;var s="Do you really want to close the page without saving your progress?";if(t){t.returnValue=s}return s};window.onbeforeunload=q;if(a(".semplice-content").val()){a(".loader").show();var r=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"init",post_id:post_id},dataType:"json"});r.done(function(s){f=a.parseJSON(s.rom);var t=a(".fontset").val();if(f.branding===undefined){f.branding={}}if(f.modules===undefined){f.modules=[]}a("#semplice-content").css({"background-color":f.branding["background-color"],"background-image":"url("+f.branding["background-image"]+")","background-size":f.branding["background-size"],"background-position":f.branding["background-position"],"background-repeat":f.branding["background-repeat"]});if(f.branding["background-image"]){a(".branding-bg-image-preview").attr("src",f.branding["background-image"]).show();a("input[name=branding-bg-image]").val(f.branding["background-image"])}a("#semplice-content").children("#content-holder").remove();a("#semplice-content").append(s.html);a(".is-masonry").each(function(){var u=a(this).attr("id");if(u!==undefined){a("#"+u).masonry()}});a(".image-link").click(function(u){return false});if(t!=="default"){a(".custom-fontset").find("option").each(function(){if(a(this).val()===t){a(this).attr("selected","selected")}else{a(this).removeAttr("selected")}});j.customFontset(t)}else{if(default_fontset){j.customFontset(default_fontset)}else{j.customFontset()}}a(".save-to-wp").addClass("save-to-wp-activated");a(".loader").fadeOut("slow")});r.fail(function(s,t){alert("JSON Parse Error: "+t);a(".loader").fadeOut("slow")});r.error(function(s){alert(s.responseText)})}else{if(default_fontset){j.customFontset(default_fontset)}else{j.customFontset()}a("#semplice-content").html("");a("#semplice-content").append('<div id="content-holder"></div>');a(".save-to-wp").addClass("save-to-wp-activated")}},add:function(w){a(".loader").show();var q=k("content");var v="#"+q;var r=a(w).data("content-type");var u={"background-color":"transparent","background-image":"","background-size":"none","background-position":"50% 0%","background-repeat":"no-repeat","padding-top":"0px","padding-bottom":"0px","padding-right":"0px","padding-left":"0px"};if(r==="multi-column"){f[v]={columns:{},styles:{}}}else{f[v]={styles:{}}}var s=a(w).data("module-id");if(s){f[v]["custom_module"]=s;a(".modules-sub").fadeOut("fast")}f[v].styles=u;var t=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:q,content_type:r,edit_mode:"new",rom:f[v]},dataType:"html"});t.done(function(x){if(x==="ModuleNotFound"){alert("Module not found! Please make sure the selected module is installed.");a(".loader").fadeOut("slow")}else{a("#content-holder").append(x);a(v).find(".color-picker").wpColorPicker(p);a(v).find(".wp-picker-default").remove();a(v).find(".padding-left, .padding-right").remove();if(r==="multi-column"){a(v).find(".save").attr("class","save-mc");a(v).find(".duplicate").attr("class","duplicate-mc");a(v).find(".save-block").attr("class","save-block-mc");n()}a(v).addClass("in-edit-mode");a(v).find(".fadein").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein")});a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(v).offset().top-100},0)}});t.fail(function(x,y){alert("Request failed: "+y);a(".loader").fadeOut("slow")})},addColumn:function(u){a(".loader").show();var t="#"+a(u).data("content-id");var q=k("column");var s="#"+q;var r=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:q,parent_id:t,content_type:"add-column",edit_mode:"new"},dataType:"html"});r.done(function(v){a(t).find(".columns").append(v);a(s).find(".save").remove();a(s).find(".fadein").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein")});a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(s).offset().top-100},0)});r.fail(function(v,w){alert("Request failed: "+w);a(".loader").fadeOut("slow")})},addColumnContent:function(v){a(".loader").show();var y="#"+(v).data("content-id");var s=k("column_content");var q="#"+(v).data("column-id");var r="#"+s;var w=a(v).data("content-type");var x={"background-color":"transparent","background-image":"","background-size":"none","background-position":"50% 0%","background-repeat":"no-repeat","padding-top":"0px","padding-bottom":"0px","padding-right":"0px","padding-left":"0px"};if(f[y].columns[q]===undefined){f[y].columns[q]={}}f[y].columns[q][r]={styles:{}};f[y].columns[q][r].styles=x;var u=a(v).data("module-id");if(u){f[y].columns[q][r]["custom_module"]=u;a(".modules-sub").fadeOut("fast")}var t=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:s,ccId:y,content_type:w,rom:f[y],column_id:q,edit_mode:"new",is_column_content:true},dataType:"html"});t.done(function(z){if(z==="ModuleNotFound"){alert("Module not found! Please make sure the selected module is installed.");a(".loader").fadeOut("slow")}else{a(q).find(".column-inner").append(z);if(u){a(r).attr("data-module-id",u)}a(r).find(".save").remove();a(r).prev(".placeholder").remove();a(r).find(".color-picker").wpColorPicker(p);a(r).find(".wp-picker-default").remove();a(r).addClass("in-edit-mode");a(r).find(".fadein").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein")});a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(r).offset().top-140},0)}});t.fail(function(z,A){alert("Request failed: "+A);a(".loader").fadeOut("slow")})},save:function(x,v,u){a(".loader").show();var r=a(x).data("content-id");var w="#"+a(x).data("content-id");var s=a(x).data("content-type");var q;e=false;f[w]={content:"",styles:{},options:{},custom_module:"",content_type:s};a(w).find(".is-content").each(function(){f[w].content=a(this).val();if(a(this).val().length===0){q=true}});a(w).find(".is-option").each(function(){if(a.isArray(a(this).val())){f[w].options[a(this).attr("name")]=a(this).val()}else{if(a(this).val().match(l)){f[w].options[a(this).attr("name")]=a(this).val()}else{e=true;c(a(this).attr("name"))}}});a(w).find(".is-style").each(function(){if(a(this).val().match(l)){f[w].styles[a(this).attr("name")]=a(this).val()}else{e=true;c(a(this).attr("name"))}});a(w).find(".is-custom-module").each(function(){f[w].custom_module=a(this).val().replace(/["']/g,"")});f[w].styles["background-color"]=i(f[w].styles["background-color"]);if(!q&&!e){var t=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:r,content_type:s,rom:f[w]},dataType:"html"});t.done(function(y){a(w).append(y);a("#semplice").on("click",".save",{duplicate:false,save_block:false},o);a("#semplice").on("click",".duplicate",{duplicate:true,save_block:false},o);a("#semplice").on("click",".save-block",{duplicate:false,save_block:true},o);a(w).find(".edit-content").remove();a(w).removeClass("in-edit-mode");a(w).find(".fadein-view").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein-view")});a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(w).offset().top-100},0);if(v){j.duplicate(x)}else{if(u){j.saveBlock(x)}}});t.fail(function(y,z){alert("Request failed: "+z);a("#semplice").on("click",".save",o);a(".loader").fadeOut("slow")})}else{if(!e){alert("Please add some content before save!")}a("#semplice").on("click",".save",{duplicate:false,save_block:false},o);a("#semplice").on("click",".duplicate",{duplicate:true,save_block:false},o);a("#semplice").on("click",".save-block",{duplicate:false,save_block:true},o);a(".loader").fadeOut("slow")}},saveSingleEdit:function(t){a(".loader").show();var y="#"+a(t).data("container-id");var x=a(t).data("container-id");var w=a(t).data("content-id");var r="#"+a(t).data("content-id");var q=a(t).data("column-id");var u=a(t).data("content-type");var v;e=false;a(r).find(".is-content").each(function(){f[y].columns[q][r].content=a(this).val();if(a(this).val().length===0){v=true}});a(r).find(".is-cc-option").each(function(){if(a(this).val().match(l)){f[y].columns[q][r].options[a(this).attr("name")]=a(this).val()}else{e=true;c(a(this).attr("name"))}});a(r).find(".is-cc-style").each(function(){if(a(this).val().match(l)){f[y].columns[q][r].styles[a(this).attr("name")]=a(this).val()}else{e=true;c(a(this).attr("name"))}});f[y].columns[q][r].styles["background-color"]=i(f[y].columns[q][r].styles["background-color"]);if(!v&&!e){var s=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:x,rom:f[y],content_type:"multi-column"},dataType:"html"});s.done(function(z){a(y).find(r).remove();a(y).append(z);a("#semplice").on("click",".save-se",d);a(y).removeClass("in-edit-mode");a(y).find(".fadein-view").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein-view")});a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(y).offset().top-100},0)});s.fail(function(z,A){alert("Request failed: "+A);a("#semplice").on("click",".save-se",d);a(".loader").fadeOut("slow")})}else{if(!e){alert("Please add some content before save!")}a("#semplice").on("click",".save-se",d);a(".loader").fadeOut("slow")}},saveColumnContent:function(x,v,u){a(".loader").show();var r=a(x).data("content-id");var w="#"+a(x).data("content-id");var q;e=false;var s=a(x).data("content-type");f[w]={columns:{},styles:{},options:{},content_type:s};a(w).find(".is-option").each(function(){if(a(this).val().match(l)){f[w].options[a(this).attr("name")]=a(this).val()}else{e=true;c(a(this).attr("name"))}});a(w).find(".is-style").each(function(){if(a(this).val().match(l)){f[w].styles[a(this).attr("name")]=a(this).val()}else{e=true;c(a(this).attr("name"))}});f[w].styles["background-color"]=i(f[w].styles["background-color"]);a(w).find(".column").each(function(){var y="#"+a(this).attr("id");f[w].columns[y]={options:{}};a(a(this)).find(".is-option").each(function(){f[w].columns[y].options[a(this).attr("name")]=a(this).val()});a(this).find(".column-content").each(function(){var C=a(this);var B="#"+a(this).data("content-id");var A="#"+a(this).data("in-column");var z=a(this).data("content-type");f[w].columns[A][B]={content:{},styles:{},options:{},custom_module:"",content_type:z};a(this).find(".is-content").each(function(){f[w].columns[A][B].content=a(this).val();if(a(this).val().length===0){q=true}});a(this).find(".is-cc-option").each(function(){if(a(this).val().match(l)){f[w].columns[A][B].options[a(this).attr("name")]=a(this).val()}else{e=true;c(a(this).attr("name"))}});a(this).find(".is-cc-style").each(function(){if(a(this).val().match(l)){f[w].columns[A][B].styles[a(this).attr("name")]=a(this).val()}else{e=true;c(a(this).attr("name"))}});a(this).find(".is-cc-custom-module").each(function(){f[w].columns[A][B].custom_module=a(this).val().replace(/["']/g,"")});f[w].columns[A][B].styles["background-color"]=i(f[w].columns[A][B].styles["background-color"])})});if(a(w).find(".column").length!==0&&a(w).find(".column-content").length!==0&&!q&&!e){var t=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:r,rom:f[w],content_type:s},dataType:"html"});t.done(function(y){a(w).append(y);a("#semplice").on("click",".save-mc",{duplicate:false,save_block:false},h);a("#semplice").on("click",".duplicate-mc",{duplicate:true,save_block:false},h);a("#semplice").on("click",".save-block-mc",{duplicate:false,save_block:true},h);a(w).find(".edit-content").remove();a(w).removeClass("in-edit-mode");a(w).find(".fadein-view").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein-view")});a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(w).offset().top-100},0);if(v){j.duplicate(x)}else{if(u){j.saveBlock(x)}}});t.fail(function(y,z){alert("Request failed: "+z);a("#semplice").on("click",".save-mc",{duplicate:false,save_block:false},h);a("#semplice").on("click",".duplicate-mc",{duplicate:true,save_block:false},h);a("#semplice").on("click",".save-block-mc",{duplicate:false,save_block:true},h);a(".loader").fadeOut("slow")})}else{if(!e){alert("Please add a column and a column content before save.")}a("#semplice").on("click",".save-mc",{duplicate:false},h);a("#semplice").on("click",".duplicate-mc",{duplicate:true},h);a(".loader").fadeOut("slow")}},edit:function(u){a(".loader").show();n();var q=a(u).data("content-id");var t="#"+a(u).data("content-id");var r=a(u).data("content-type");var s=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"edit",id:q,content_type:r,rom:f[t]},dataType:"html"});s.done(function(v){if(v==="ModuleNotFound"){alert("Module not found! Please re-install the module used in this content.");a("#semplice").on("click",".content-container",m);a(".loader").fadeOut("slow")}else{a(t).append(v);if(r==="multi-column"){a(t).find(".mc-content-container").remove()}else{a("#semplice").on("click",".content-container",m);a(t).find(".content-container").remove()}a(t).find("input[name=background-image]").each(function(){if(a(this).val()){a(this).next().show()}});if(a("input[name=img]").val()){a(t).find("img.image-preview").show()}a(t).find(".color-picker").wpColorPicker(p);a(t).find(".wp-picker-default").remove();if(r==="multi-column"){a(t).find(".save").attr("class","save-mc");a(t).find(".duplicate").attr("class","duplicate-mc");a(t).find(".save-block").attr("class","save-block-mc");a(t).find(".padding-left").first().remove();a(t).find(".padding-right").first().remove()}else{a(t).find(".padding-left, .padding-right").remove()}a(t).find(".fadein").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein")});a(t).addClass("in-edit-mode");a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(t).offset().top-100},0)}});s.fail(function(v,w){alert("Request failed: "+w);if(r!=="multi-column"){a("#semplice").on("click",".content-container",m)}a(".loader").fadeOut("slow")})},singleEdit:function(r,x){a(".loader").show();var w="#"+a(r).data("content-id");var t=a(x).data("single-edit-column-id");var u=a(x).data("single-edit-content-id");var v="#"+a(x).data("single-edit-content-id");var q=a(x).data("single-edit-content-type");var s=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"single-edit",id:u,ccId:w,column_id:t,content_type:q,rom:f[w].columns[t][v]},dataType:"html"});s.done(function(y){a(w).append(y);a(w).find(".mc-content-container").remove();a(w).find("input[name=background-image]").each(function(){if(a(this).val()){a(this).next().show()}});if(a("input[name=img]").val()){a(w).find("img.image-preview").show()}a(w).find(".color-picker").wpColorPicker(p);a(w).find(".wp-picker-default").remove();a(v).find(".fadein").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein")});a(w).addClass("in-edit-mode");a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(w).offset().top-100},0)});s.fail(function(y,z){alert("Request failed: "+z);a(".loader").fadeOut("slow")})},duplicate:function(w){var r=a(w).data("content-id");var v="#"+a(w).data("content-id");var u=a(w).data("content-type");var s=k("content");var t="#"+s;f[t]=jQuery.extend(true,{},f[v]);a(v).clone().insertAfter(v).attr("id",s).html("");var q=a('<a data-content-id="'+s+'" data-content-type="'+u+'">');if(u!=="multi-column"){a("#semplice").off("click",".content-container")}j.edit(q)},remove:function(r){var q="#"+a(r).data("content-id");a(q).transition({opacity:0,marginTop:-40},400,"ease",function(){delete f[q];a(q).remove()})},removeColumn:function(s){var r="#"+a(s).data("content-id");var q=a(s).data("parent-id");a(r).transition({opacity:0,marginTop:-40},400,"ease",function(){if(f[q]!==undefined){delete f[q][r]}a(r).remove()})},up:function(s){var r="#"+a(s).data("content-id");var q=a(r).prev().attr("id");a(r).insertBefore("#"+q);a(a.browser.webkit?"body":"html").animate({scrollTop:a(r).offset().top-100},0)},down:function(s){var r="#"+a(s).data("content-id");var q=a(r).next().attr("id");a(r).insertAfter("#"+q);a(a.browser.webkit?"body":"html").animate({scrollTop:a(r).offset().top-100},0)},removeMedia:function(s,q){var r="#"+a(s).data("content-id");a(r).find(".is-"+q).first().val("");a(r).find("."+q+"-upload").first().text("Upload "+q);a(r).find("."+q+"-preview").first().attr("src","");a(r).find("."+q+"-preview").first().hide();if(q==="branding-bg-image"){a(r).find(".is-"+q).val("");a("#semplice-content").css("background-image","none");f.branding["background-image"]=""}},removeBg:function(r){var q="#"+a(r).data("content-id");a(q).find(".is-bg-image").val("");a(q).find(".bg-upload").text("Upload Image");a(q).find(".bg-preview").attr("src","");a(q).find(".bg-preview").hide()},customFontset:function(r){var q=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"custom-fontset",fontset_id:r},dataType:"html"});q.done(function(s){if(!r){f.fontset="default"}else{f.fontset=r}a("[data-fontset-id=ce-fontset]").remove();a("#ce-fontset").remove();a("head").append(s);a(".loader").fadeOut("slow")});q.fail(function(s,t){alert("Request failed: "+t);a(".loader").fadeOut("slow")})},loadTemplate:function(r,q){a(".loader").show();a(".templates-sub").fadeOut(250,function(){var s=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"load-template",template_id:r,template_type:q},dataType:"json"});s.done(function(t){console.log(t);a("#semplice-content").html(t.html);f=a.parseJSON(t.rom);if(f.branding===undefined){f.branding={}}if(f.modules===undefined){f.modules=[]}f.branding=a.parseJSON(t.branding);a("#semplice-content").css({"background-color":f.branding["background-color"],"background-image":"url("+f.branding["background-image"]+")","background-size":f.branding["background-size"],"background-position":f.branding["background-position"],"background-repeat":f.branding["background-repeat"]});a(".branding-bg-color").val(f.branding["background-color"]);a(".branding-sub .wp-color-result").css("backgroundColor",f.branding["background-color"]);var u=[f.branding["background-size"],f.branding["background-position"],f.branding["background-repeat"]];var w=0;a(".branding-sub .select-box").each(function(){var x=u[w];a(this).find("option").each(function(){if(a(this).val()===x){a(this).attr("selected","selected")}else{a(this).removeAttr("selected")}});w++});if(f.branding["background-image"]){a(".branding-bg-image-preview").attr("src",f.branding["background-image"]).show();a("input[name=branding-bg-image]").val(f.branding["background-image"])}if(f.fontset){var v=f.fontset;if(v!=="default"){a(".custom-fontset").find("option").each(function(){if(a(this).val()===v){a(this).attr("selected","selected")}else{a(this).removeAttr("selected")}});j.customFontset(v)}else{if(default_fontset){j.customFontset(default_fontset)}else{j.customFontset()}}}a(".loader").fadeOut("slow");if(q==="semplice"){a(".overlay").fadeIn(150);a(".no-images").fadeIn(250)}});s.fail(function(t,u){alert("Request failed: "+u);a(".loader").fadeOut("slow")});s.error(function(t){alert(t.responseText)})})},showLayers:function(s){a(".options-sub .show-layers").addClass("checked");var r=(s).data("content-id");a("#semplice").addClass("show-all-layers");a(".content-container, .mc-content-container").hide();a("#content-holder").sortable({axis:"y",cancel:".edit-content, .top-layer"});var q;a("#content-holder > div").each(function(){var w=false;var x="";var y="#"+a(this).attr("id");var t=a(this).attr("id");var v=a(this).children(".content-container, .mc-content-container").attr("data-content-type");if(a(this).hasClass("in-edit-mode")){a(this).find(".edit-content").hide();a(this).addClass("layer-mode");w="edit";x="In edit mode";var u=a(this).find('input[name="layer-name"]').val()}else{var u=f[y].options["layer-name"]}if(r==t){a(this).append('<div class="layer"><div class="icon"></div><p class="layer-name">'+u+'</p><a class="edit-layer" data-content-id="'+t+'" data-content-type="'+v+'" data-edit-mode="'+w+'"></a><a class="remove" data-content-id="'+t+'"></a><p class="in-edit-mode">'+x+'</p><div class="active-layer"></div><div class="drag-icon"></div>');q=y}else{a(this).append('<div class="layer"><div class="icon"></div><p class="layer-name">'+u+'</p><a class="edit-layer" data-content-id="'+t+'" data-content-type="'+v+'" data-edit-mode="'+w+'"></a><a class="remove" data-content-id="'+t+'"></a><p class="in-edit-mode">'+x+'</p><div class="drag-icon"></div>')}a(this).children(".layer").stop().fadeIn(300)});a("#semplice-content").prepend('<div class="layer top-layer hide-layers" data-content-id="'+r+'"><div class="icon"></div><p class="layer-name">Back to edit mode</p></div>');a(".top-layer").fadeIn(300);if(q){a(a.browser.webkit?"body":"html").animate({scrollTop:a(q).offset().top-150},0)}a(s).addClass("checked")},hideLayers:function(u,q){a(".options-sub .show-layers").removeClass("checked");var t=a(u).data("content-id");var s=a(u).data("edit-mode");var r=a(u).data("content-type");a("#semplice").removeClass("show-all-layers");a(".content-container, .mc-content-container").show();a("#content-holder > div").each(function(){a(this).children(".layer").remove();if(a(this).hasClass("in-edit-mode")){a(this).find(".edit-content").show();a(this).removeClass("layer-mode")}});a(".top-layer").remove();a("#content-holder").sortable("destroy");if(q&&s!=="edit"){if(r!=="multi-column"){a("#semplice").off("click",".content-container")}j.edit(u)}else{if(t!=="undefined"){a(a.browser.webkit?"body":"html").animate({scrollTop:a("#"+t).offset().top-100},0)}}},saveBlock:function(u){var t="#"+a(u).data("content-id");var q=a(u).data("content-type");var s=a(t).html();var r=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"save-block",id:t,rom:f[t],block_html:s,content_type:q},dataType:"html"});r.done(function(v){alert(v)});r.fail(function(v,w){alert("Request failed: "+w);a(".loader").fadeOut("slow")})},saveToWp:function(){a(".loader").show();a("head").find("[data-fontset-id=ce-fontset]").each(function(){a(this).remove()});a("#ce-fontset").remove();a(".is-shortcode").each(function(){a(this).find(".executed").html(a(this).find(".unexecuted").html().replace("unex_",""))});var x=a("#semplice-content").html();a(".semplice-content").val(x);f.branding={"background-color":a(".branding-bg-color").val(),"background-image":a(".branding-bg-image").val(),"background-size":a(".branding-bg-size").val(),"background-position":a(".branding-bg-pos").val(),"background-repeat":a(".branding-bg-repeat").val()};if(f.fontset.length===0){f.fontset="default"}a(".fontset").val(f.fontset);a(".rom").val(JSON.stringify(f));var q=a(".content-p").length;var u=a(".content-img").length;var r=a(".content-video").length;var s=a(".mc-sub-content-container").length;var z=a(".content-gallery").length;var t=a(".content-audio").length;var y=a(".content-spacer").length;var w=a(".content-thumbnails").length;var v='<span class="comment">// Content stats</span><br /><br /><span class="num">'+q+'</span> paragraph(s), <span class="num">'+u+'</span> image(s)<br /><span class="num">'+r+'</span> video(s), <span class="num">'+s+'</span> column content(s)<br /><span class="num">'+z+'</span> gallery(s), <span class="num">'+t+'</span> audio file(s)<br /><span class="num">'+y+'</span> spacer(s), <span class="num">'+w+"</span> thumbview";a(".branding").val(JSON.stringify(f.branding));a("[data-modules-array]").each(function(){f.modules.push(a(this).data("modules-array"))});a(".modules").val(JSON.stringify(f.modules));a(".stats").val(v);a(".content-code").html(v);g=true;a("#wpwrap").show();a("#semplice").fadeOut(300)}};a(document).on("click",".add-semplice-editor",function(){if(!g){a("#semplice").appendTo("body");a(a.browser.webkit?"body":"html").animate({scrollTop:0},0,function(){a("#semplice").fadeIn(300,function(){a("#wpwrap").hide();j.init()})})}else{alert("Please update or save your page / project before reopen the content editor!")}});a("#semplice").on("click",".add-content",function(){if(!a("#semplice").hasClass("show-all-layers")){j.add(a(this))}else{alert("Please exit the layer mode to add new content")}});a("#semplice").on("click",".add-column-content",function(){j.addColumnContent(a(this))});a("#semplice").on("click",".add-column",function(){j.addColumn(a(this))});function o(q){a("#semplice").off("click",".save");a("#semplice").off("click",".duplicate");a("#semplice").off("click",".save-block");j.save(a(this),q.data.duplicate,q.data.save_block)}a("#semplice").on("click",".save",{duplicate:false,save_block:false},o);a("#semplice").on("click",".duplicate",{duplicate:true,save_block:false},o);a("#semplice").on("click",".save-block",{duplicate:false,save_block:true},o);function h(q){a("#semplice").off("click",".save-mc");a("#semplice").off("click",".duplicate-mc");a("#semplice").off("click",".save-block-mc");j.saveColumnContent(a(this),q.data.duplicate,q.data.save_block)}a("#semplice").on("click",".save-mc",{duplicate:false,save_block:false},h);a("#semplice").on("click",".duplicate-mc",{duplicate:true,save_block:false},h);a("#semplice").on("click",".save-block-mc",{duplicate:false,save_block:true},h);function d(){a("#semplice").off("click",".save-se");j.saveSingleEdit(a(this))}a("#semplice").on("click",".save-se",d);a("#semplice").on("click",".edit",function(){j.edit(a(this))});function m(){if(!a("#semplice").hasClass("show-all-layers")){a("#semplice").off("click",".content-container");j.edit(a(this))}else{j.hideLayers(a(this),true)}}a("#semplice").on("click",".content-container",m);a("#semplice").on("click",".edit-layer",m);a("#semplice").on("click",".video",function(q){q.stopPropagation()});a("#semplice").on("click",".mc-sub-content-container",function(q){var t=a(this);var s=a(this).offset().left,r=a(this).offset().top;a(this).children(".single-edit").css({top:(q.pageY-r),left:(q.pageX-s)}).show();a(this).find(".edit-column").unbind().click(function(){a(t).children(".single-edit").remove();j.edit(a(t))});a(this).find(".edit-single").unbind().click(function(){a(t).children(".single-edit").remove();j.singleEdit(a(t),a(this))})});a("#semplice").on("click","a.column-duplicate",function(){j.duplicateColumn(a(this))});a("#semplice").on("click",".remove",function(){a(".remove-confirm").data({"content-id":a(this).data("content-id"),"is-column":"","parent-id":""});a(".overlay").fadeIn(100);a(".confirm").fadeIn(100)});a("#semplice").on("click",".remove-column",function(){a(".remove-confirm").data({"content-id":a(this).data("column-id"),"is-column":"is-column","parent-id":a(this).data("parent-id")});a(".overlay").fadeIn(100);a(".confirm").fadeIn(100)});a("#semplice").on("click",".remove-confirm",function(){a(".overlay").fadeOut(100);a(".confirm").fadeOut(100);var q=a(this);if(a(this).data("is-column")==="is-column"){j.removeColumn(a(q))}else{j.remove(a(q))}});a("#semplice").on("click",".remove-decline",function(){a(".overlay").fadeOut(100);a(".confirm").fadeOut(100)});a("#semplice").on("click",".cancel-to-wp",function(){a(".overlay").fadeIn(100);a(".cancel").fadeIn(100)});a("#semplice").on("click",".cancel-confirm",function(){a(".overlay").fadeOut(100);a(".cancel").fadeOut(100,function(){a("#wpwrap").show();a("#semplice").fadeOut(300,function(){window.onbeforeunload=null})})});a("#semplice").on("click",".cancel-decline",function(){a(".overlay").fadeOut(100);a(".cancel").fadeOut(100)});a("#semplice").on("click",".show-layers",function(){if(!a("#semplice").hasClass("show-all-layers")){j.showLayers(a(this))}else{j.hideLayers(a(this))}});a("#semplice").on("click",".hide-layers",function(){j.hideLayers(a(this))});a("#semplice").on("click",".up",function(){j.up(a(this))});a("#semplice").on("click",".down",function(){j.down(a(this))});a("#semplice").on("click",".column-up",function(){j.up(a(this))});a("#semplice").on("click",".column-down",function(){j.down(a(this))});a("#semplice").on("click",".remove-media",function(){j.removeMedia(a(this),a(this).data("media"))});a("#semplice").on("click",".save-to-wp-activated",function(){if(a("#semplice-content").find(".in-edit-mode").length){alert("Please save or delete open edit fields.")}else{if(a("#semplice").hasClass("show-all-layers")){alert("Please exit the layer mode before save.")}else{j.saveToWp()}}});a("#semplice").on("change",".select-box",function(){var q=a(this).val();a(this).find("option").each(function(){if(a(this).val()===q){a(this).attr("selected","selected")}else{a(this).removeAttr("selected")}})});a("#semplice").on("change",".branding-bg-select",function(){var q=a(this).data("css-attribute");a("#semplice-content").css(q,a(this).val())});a("#semplice").on("change",".custom-fontset",function(){a(".loader").show();var q=a(this).val();a(this).find("option").each(function(){if(a(this).val()===q){a(this).attr("selected","selected")}else{a(this).removeAttr("selected")}});if(q!=="default"){j.customFontset(q)}else{if(default_fontset){j.customFontset(default_fontset)}else{j.customFontset()}}});a("#semplice").on("click","a.background",function(){a(this).next(".background-sub").fadeIn(150)});a("#semplice").on("click","a.ce-dismiss",function(){a(".overlay").fadeOut(150);a(".no-images").fadeOut(250)});a("#semplice").on("change",".select-project, .select-page",function(){var q=a(this).val();if(q!=="default"){a(".loader").show();a(".template-confirm").data({"template-id":q,"template-type":"object"});a(".overlay").fadeIn(100);a(".confirm-template").fadeIn(100)}});a("#semplice").on("click",".template-confirm",function(){a(".overlay").fadeOut(100);a(".confirm-template").fadeOut(100);j.loadTemplate(a(this).data("template-id"),a(this).data("template-type"))});a("#semplice").on("click",".template-decline",function(){a(".loader").hide();a(".overlay").fadeOut(100);a(".confirm-template").fadeOut(100)});a("#semplice").on("click","a.branding",function(){a(".branding-sub").fadeIn(150)});a("#semplice").on("click","a.show-templates",function(){a(".templates-sub").fadeIn(150)});a("#semplice").on("click","a.show-options",function(){a(".options-sub").fadeIn(150)});a("#semplice").on("click","a.show-modules",function(){if(a(this).data("in-column")){var q=a(this).data("column-id");a(".modules-sub-"+q).fadeIn(150)}else{a(".modules-sub-global").fadeIn(150)}});a("#semplice").on("click","a.padding",function(){a(this).next(".padding-sub").fadeIn(150)});a("#semplice").on("change","select[name=wysiwyg_bg_color]",function(){var q="#cke_"+a(this).data("content-id")+" .cke_wysiwyg_div";if(a(this).val()==="white"){a(q).css("backgroundColor","#ffffff")}else{a(q).css("backgroundColor","#000000")}});a("#semplice").mouseup(function(v){var x=a(".background-sub");var t=a(".media-modal-content");if(!x.is(v.target)&&!t.is(v.target)&&x.has(v.target).length===0){x.fadeOut(150)}var u=a(".branding-sub");if(!u.is(v.target)&&u.has(v.target).length===0){u.fadeOut(150)}var s=a(".options-sub");if(!s.is(v.target)&&s.has(v.target).length===0){s.fadeOut(150)}var w=a(".templates-sub");if(!w.is(v.target)&&w.has(v.target).length===0){w.fadeOut(250)}var q=a(".modules-sub");if(!q.is(v.target)&&q.has(v.target).length===0){q.fadeOut(250)}var y=a(".padding-sub");if(!y.is(v.target)&&y.has(v.target).length===0){y.fadeOut(150)}var r=a(".single-edit");if(!r.is(v.target)&&r.has(v.target).length===0){r.hide()}});a(".show-grid").toggle(function(){a("#grid").fadeIn("300");a(this).addClass("checked")},function(){a("#grid").fadeOut("300");a(this).removeClass("checked")});a("#semplice").on({mouseenter:function(){var q=a(this).find(".tooltip").width();q=(q-70)/2;a(this).find(".tooltip").css("marginLeft",-q);a(this).find(".tooltip").stop().fadeIn(120)},mouseleave:function(){a(this).find(".tooltip").stop().fadeOut(120)}},"ul.types li");a("#semplice").on({mouseenter:function(){var q=a(this).find(".tooltip").width();q=(q-50)/2;a(this).find(".tooltip").css("marginLeft",-q);a(this).find(".tooltip").stop().fadeIn(120)},mouseleave:function(){a(this).find(".tooltip").stop().fadeOut(120)}},"ul.atts-save li");function i(q){if(!q){return"transparent"}var s=q.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function r(t){return("0"+parseInt(t).toString(16)).slice(-2)}if(s){return"#"+r(s[1])+r(s[2])+r(s[3])}else{return q}}function c(q){alert('The value for "'+q+'" contains invalid characters. Allowed characters are: A-Z a-z 0-9 # , : / _ -."')}var p={defaultColor:false,change:function(q,r){},hide:true,palettes:true};var b={defaultColor:false,change:function(q,r){a("#semplice-content").css("background-color",r.color.toString())},hide:true,palettes:true};var k=function(q){return q+"_"+Math.random().toString(36).substr(2,9)};function n(){a(window).scroll(function(){a.each(a(".sticky-mc-atts"),function(){var u=10;var t=a(this).height();var r=a(this).parent().offset().top;var q=a(this).parent().height();var s=a(window).scrollTop();if((r-u)<s&&s<(r-u+q-t)){if(!a(this).hasClass("is-sticky")){a(this).addClass("is-sticky");a(this).css("top",u+50);a(this).show()}}else{if(a(this).hasClass("is-sticky")){a(this).removeClass("is-sticky");a(this).css("top",r);a(this).hide()}}})})}})})(jQuery);